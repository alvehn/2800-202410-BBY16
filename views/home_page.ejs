<%- include("templates/header") %>
<div class="flex flex-col w-full min-h-screen pt-16 pb-16 bg-celadon">
  <div class="flex flex-col flex-grow">
    <div class="relative flex flex-grow">
      <img
        class="w-full h-auto object-cover"
        src="hills.png"
        alt="Placeholder image"
      />
      <div class="absolute inset-x-0 top-16 flex justify-center">
        <% if (user.study_session.inSession) { %>
          <form action="/view_study_session" method="POST">
            <input type="hidden" name="sessionId" value="<%= user.study_session.currentSessionID %>">
            <button type="submit">View My Session</button>
          </form>
        <% } else { %>
          <form action="/start_study_session" method="POST">
            <button type="submit">Start Study Session</button>
          </form>
        <% } %>
      </div>
      <div class="absolute inset-x-0 top-24 flex justify-center">
        <div class="text-4xl font-bold text-gray-700 mb-4">
          <span id="hr">00</span>
          <span class="text-sm">Hr</span>
          <span id="min">00</span>
          <span class="text-sm">Min</span>
          <span id="sec">00</span>
          <span class="text-sm">Sec</span>
      </div>
      </div>
    </div>
  </div>
</div>
<script>
    const hrSpan = document.getElementById('hr');
    const minSpan = document.getElementById('min');
    const secSpan = document.getElementById("sec");
    const duration = <%= user.hours_per_day %>;

    function displayTime(){
      const hours = Math.floor(duration / 3600);
      const minutes = Math.floor((duration % 3600) / 60);
      const seconds = Math.floor(duration % 60);

      hrSpan.textContent = String(hours).padStart(2, '0');
      minSpan.textContent = String(minutes).padStart(2, '0');
      secSpan.textContent = String(seconds).padStart(2, '0');
    }

    displayTime();
</script>
<%- include("templates/navbar") %>
