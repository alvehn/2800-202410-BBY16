<%- include("templates/default_header") %>
<div class="flex flex-col h-screen">
    <div class="flex-1 flex items-center justify-center bg-gray-200">
        <!-- Leave this part blank for animation -->
    </div>
    <div class="flex-1 flex flex-col items-center justify-center bg-white p-4">
        <div class="text-4xl font-bold text-gray-700 mb-4">
            <span id="hr">00</span>
            <span class="text-sm">Hr</span>
            <span id="min">00</span>
            <span class="text-sm">Min</span>
            <span id="sec">00</span>
            <span class="text-sm">Sec</span>
        </div>
        <div class="text-lg text-gray-500 mb-4">
            Placeholder for currency
        </div>
        <div>
            <form id="endSessionForm" action="/end_session" method="POST" class="flex flex-col items-center space-y-4">
                <input type="hidden" name="startTime" value="<%= startTime %>">
                <input type="hidden" name="sessionId" value="<%= sessionId %>">
                <button type="submit" class="px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition">End Session</button>
            </form>
        </div>
    </div>
</div>

<script>
    const startTime = new Date("<%= startTime %>")
    const currentTime = new Date();
    let duration = Math.floor((currentTime - startTime) / 1000);

    const hrSpan = document.getElementById('hr');
    const minSpan = document.getElementById('min');
    const secSpan = document.getElementById("sec");
    const durationInput = document.getElementById("durationInput");
    let timerInterval;

    function updateDisplay() {
        const hours = Math.floor(duration / 3600);
        const minutes = Math.floor((duration % 3600) / 60);
        const seconds = Math.floor(duration % 60);

        hrSpan.textContent = String(hours).padStart(2, '0');
        minSpan.textContent = String(minutes).padStart(2, '0');
        secSpan.textContent = String(seconds).padStart(2, '0');
    }

    function startTimer() {
        timerInterval = setInterval(() => {
            duration++;
            updateDisplay();
        }, 1000);
    }
    // Initialize display
    updateDisplay();
    startTimer(); // Start the timer initially
</script>
<%- include("templates/default_footer") %>
