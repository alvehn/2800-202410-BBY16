<%- include("templates/default_header") %>
<div class="flex flex-col h-screen">
    <div class="flex-1 flex items-center justify-center bg-gray-200">
        <!-- Leave this part blank for animation -->
    </div>
    <div class="flex-1 flex flex-col items-center justify-center bg-white">
        <div>
            <span id="hr">00</span>
            <span>Hr</span>
            <span id="min">00</span>
            <span>Min</span>
            <span id="sec">00</span>
            <span>Sec</span>
        </div>
        <div>
            Placeholder for currency
        </div>
        <div>
            <button id="pause">Pause</button>
            <button id="resume" style="display:none;">Resume</button>
            <form id="endSessionForm" action="/end_session" method="POST">
                <input type="hidden" name="sessionId" value="<%= sessionId %>">
                <input type="hidden" name="duration" id="durationInput" value="">
                <button type="submit">End Session</button>
            </form>
        </div>
    </div>
</div>
<script>
    let duration = <%= duration %>;
    const hrSpan = document.getElementById('hr');
    const minSpan = document.getElementById('min');
    const secSpan = document.getElementById("sec");
    const pauseButton = document.getElementById("pause");
    const resumeButton = document.getElementById("resume");
    const durationInput = document.getElementById("durationInput");

    function updateDisplay() {
        const hours = Math.floor(duration / 3600);
        const minutes = Math.floor((duration % 3600) / 60);
        const seconds = duration % 60;

        hrSpan.textContent = String(hours).padStart(2, '0');
        minSpan.textContent = String(minutes).padStart(2, '0');
        secSpan.textContent = String(seconds).padStart(2, '0');
    }

    function startTimer() {
        timerInterval = setInterval(() => {
            duration++;
            updateDisplay();
        }, 1000);
    }

    function pauseTimer() {
        clearInterval(timerInterval);
        pauseButton.style.display = 'none';
        resumeButton.style.display = 'inline';
    }

    function resumeTimer() {
        startTimer();
        pauseButton.style.display = 'inline';
        resumeButton.style.display = 'none';
    }

    pauseButton.addEventListener('click', pauseTimer);
    resumeButton.addEventListener('click', resumeTimer);

    document.getElementById("endSessionForm").addEventListener("submit", ()=> {
        durationInput.value = duration;
    })
    // Initialize display
    updateDisplay();
    startTimer(); // Start the timer initially
</script>
<%- include("templates/default_footer") %>
